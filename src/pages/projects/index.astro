---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects')).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<section id="projects" class="index-section items-center gap-3">
    <h1>projects</h1>
    <ul class="grid grid-cols-2 m-0 p-0 gap-5">
        {
        projects.map((p) => (
            <li class="animate-fade animate-once hover:scale-101 transition-all">
                <a class="flex flex-col gap-5" href={`/projects/${p.id}/`}>
                    {
                        p.data.image && (
                        <Image width={720} height={360} src={p.data.image} alt="" />
                        )
                    }
                    <div class="flex flex-col gap-1">
                        <div class:list={[`text-sm rounded-full w-fit h-fit px-3 flex flex-row items-center gap-2`,
                            p.data.status === "Prototype" && "text-red-700 bg-red-100",
                            p.data.status === "In-Development" && "text-yellow-700 bg-yellow-100",
                            p.data.status === "Released" && "text-green-700 bg-green-100",
                        ]}>
                            <div class:list={[
                                `w-2 h-2 rounded-full`,
                                p.data.status === "Prototype" && "bg-red-500",
                                p.data.status === "In-Development" && "bg-yellow-500",
                                p.data.status === "Released" && "bg-green-500",

                            ]}></div>
                            {p.data.status}
                        </div>
                        <h4>{p.data.title}</h4>
                    </div>

                    <div class="flex flex-row items-center gap-2">
                        {p.data.tags?.map((t) => (
                        <p class="text-white text-sm outline rounded-full w-fit px-3 py-1">{t}</p>
                        ))}
                    </div>
                </a>
            </li>
        ))
    }
    </ul>
</section>
